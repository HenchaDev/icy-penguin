{% block content %}
<!-- Edit User Info Form -->
<form id="edit-user-info-form">
    {% csrf_token %}
    <!-- Username -->
    <div class="mb-4">
        <label for="username" class="block font-semibold">Username:</label>
        <input type="text" id="username" name="username" value="{{ request.user.username }}" class="border border-gray-300 rounded-md px-3 py-2 w-full">
    </div>

    <!-- Email -->
    <div class="mb-4">
        <label for="email" class="block font-semibold">Email:</label>
        <input type="email" id="email" name="email" value="{{ request.user.email }}" class="border border-gray-300 rounded-md px-3 py-2 w-full">
    </div>

    <!-- Submit Button -->
    <button type="submit" class="bg-blue-500 text-white font-semibold py-2 px-4 rounded hover:bg-blue-600">Save Changes</button>
</form>

<script>
    document.getElementById('edit-user-info-form').getEventListener('submit', function(event){
        event.preventDefault();

        const formData = new FormData(this);

        fetch('/users/save_user_info/', {
            method: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: formData
        })
        .then(response => {
            if (response.ok){
                console.log('Changes saved successfully');
            } else {
                console.error('Error:', response.statusText);
            }
        })
        .catch(error => console.error('Error:', error));
    });
</script>
{% endblock %}